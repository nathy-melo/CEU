<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurações</title>
    <link rel="stylesheet" href="../styleGlobal.css" />
</head>
<style>
    .conteiner-configuracoes {
        display: flex;
        flex-direction: column;
        gap: 1.25rem;
        width: 100%;
        max-width: 25rem;
        margin: 0 auto;
        padding: 0 1rem; /* evita encostar nas bordas em telas menores */
        align-items: center;
    }

    .item-configuracao {
        display: flex;
        align-items: center;
        gap: 1.25rem;
        text-decoration: none;
        color: var(--azul-escuro);
        cursor: pointer;
    }

    .icone-configuracao {
        flex-shrink: 0;
        width: 2.5rem;
        height: 2.35rem;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .imagem-icone-configuracao {
        max-width: 100%;
        max-height: 100%;
    }
    /* Ícone inline (SVG) para Baixar App */
    .icon-download {
        display: inline-block;
        width: 90%;
        height: 90%;
        color: #39637C; /* cor oficial dos SVGs */
    }
    .icon-download svg {
        width: 100%;
        height: 100%;
        display: block;
    }

    .botao-configuracao {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 16.5rem;
        height: 2.5rem;
        background-color: var(--branco);
        border-radius: 0.375rem;
        box-shadow: 0px 2px 10px 0px var(--sombra-padrao);
        font-weight: 700;
        font-size: 1.125rem;
        line-height: 1.32;
        letter-spacing: -0.0225rem;
        text-align: center;
        color: var(--azul-escuro);
        padding: 0.25rem;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .item-configuracao:hover .botao-configuracao {
        transform: translateY(-0.125rem);
        box-shadow: 0px 3px 12.5px 0px var(--sombra-padrao);
    }
</style>

<body>
    <div id="main-content">
        <div class="conteiner-configuracoes">
            <div class="item-configuracao" onclick="carregarPagina('redefinirSenha')">
                <div class="icone-configuracao">
                    <img src="../Imagens/Cadeado2.svg" alt="Cadeado" class="imagem-icone-configuracao">
                </div>
                <span class="botao botao-configuracao">Mudar Senha</span>
            </div>
            <div class="item-configuracao" data-link="#recovery-email" onclick="carregarPagina('emailRecuperacao')">
                <div class="icone-configuracao">
                    <img src="../Imagens/Arroba.svg" alt="Recovery Email Icon" class="imagem-icone-configuracao">
                </div>
                <span class="botao botao-configuracao">E-mail de Recuperação</span>
            </div>
            <div class="item-configuracao" data-link="#site-theme" onclick="carregarPagina('temaDoSite')">
                <div class="icone-configuracao">
                    <img src="../Imagens/Lampada.svg" alt="Site Theme Icon" class="imagem-icone-configuracao">
                </div>
                <span class="botao botao-configuracao">Tema do Site</span>
            </div>
            <div class="item-configuracao" data-link="#faq" onclick="carregarPagina('duvidasFrequentes')">
                <div class="icone-configuracao">
                    <img src="../Imagens/Interrogacao.svg" alt="FAQ Icon" class="imagem-icone-configuracao">
                </div>
                <span class="botao botao-configuracao">Dúvidas Frequentes</span>
            </div>
            <div class="item-configuracao" data-link="#terms" onclick="carregarPagina('termos')">
                <div class="icone-configuracao">
                    <img src="../Imagens/Escudo.svg" alt="Terms and Conditions Icon" class="imagem-icone-configuracao">
                </div>
                <span class="botao botao-configuracao">Termos de Condições</span>
            </div>
            <div class="item-configuracao" data-link="#manual" onclick="carregarPagina('manualDeUso')">
                <div class="icone-configuracao">
                    <img src="../Imagens/Jornal.svg" alt="User Manual Icon" class="imagem-icone-configuracao">
                </div>
                <span class="botao botao-configuracao">Manual de Uso</span>
            </div>
            <div class="item-configuracao" data-link="#about-us" onclick="carregarPagina('sobreNos')">
                <div class="icone-configuracao">
                    <img src="../Imagens/Pessoas.svg" alt="About Us Icon" class="imagem-icone-configuracao">
                </div>
                <span class="botao botao-configuracao">Sobre nós</span>
            </div>

            <!-- Instalação do App (apenas mobile e quando instalável) -->
            <div id="install-app-item" class="item-configuracao" style="display:none;">
                <div class="icone-configuracao" aria-hidden="true">
                    <span class="icon-download">
                        <svg viewBox="0 0 24 24" focusable="false" aria-hidden="true">
                            <path fill="currentColor" d="M12 3a1 1 0 0 1 1 1v8.586l2.293-2.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4A1 1 0 1 1 8.707 10.293L11 12.586V4a1 1 0 0 1 1-1ZM5 17a1 1 0 1 0 0 2h14a1 1 0 1 0 0-2H5Z"/>
                        </svg>
                    </span>
                </div>
                <button id="install-app-button" class="botao botao-configuracao" type="button">Baixar aplicativo</button>
            </div>
            <!-- Dica para iOS (Safari não tem beforeinstallprompt) -->
            <div id="ios-install-hint" class="item-configuracao" style="display:none; cursor:default;">
                <div class="icone-configuracao" aria-hidden="true">
                    <span class="icon-download">
                        <svg viewBox="0 0 24 24" focusable="false" aria-hidden="true">
                            <path fill="currentColor" d="M12 3a1 1 0 0 1 1 1v8.586l2.293-2.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4A1 1 0 1 1 8.707 10.293L11 12.586V4a1 1 0 0 1 1-1ZM5 17a1 1 0 1 0 0 2h14a1 1 0 1 0 0-2H5Z"/>
                        </svg>
                    </span>
                </div>
                <span class="botao botao-configuracao" style="white-space:normal; line-height:1.2;">
                    Para instalar no iOS: toque em Compartilhar → "Adicionar à Tela de Início"
                </span>
            </div>
        </div>
    </div>
    <script>
        (function(){
            const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
            const installItem = document.getElementById('install-app-item');
            const iosHint = document.getElementById('ios-install-hint');
            const installBtn = document.getElementById('install-app-button');

            function isStandalone(){
                return (window.matchMedia && window.matchMedia('(display-mode: standalone)').matches) || (navigator.standalone === true);
            }
            function isMobile(){
                return (typeof window.ceuIsMobile === 'function' ? window.ceuIsMobile() : /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));
            }
            function canInstall(){
                if (isIOS) return false; // iOS não fornece prompt — mostrar dica
                if (typeof window.ceuCanInstall === 'function') return window.ceuCanInstall();
                return !!window.deferredPrompt && isMobile() && !isStandalone();
            }
            function refreshInstallVisibility(){
                const showBtn = canInstall();
                if (installItem) installItem.style.display = showBtn ? 'flex' : 'none';
                if (iosHint) iosHint.style.display = (!showBtn && isMobile() && isIOS && !isStandalone()) ? 'flex' : 'none';
            }
            window.addEventListener('ceu:install-available', refreshInstallVisibility);
            window.addEventListener('ceu:install-checked', refreshInstallVisibility);
            window.addEventListener('appinstalled', refreshInstallVisibility);
            document.addEventListener('visibilitychange', refreshInstallVisibility);
            window.addEventListener('load', refreshInstallVisibility);
            setTimeout(refreshInstallVisibility, 0);

            if (installBtn) {
                installBtn.addEventListener('click', async function(){
                    if (typeof window.ceuTriggerInstall === 'function') {
                        await window.ceuTriggerInstall();
                    } else if (window.deferredPrompt) {
                        try {
                            window.deferredPrompt.prompt();
                            await window.deferredPrompt.userChoice;
                        } finally {
                            window.deferredPrompt = null;
                        }
                    }
                    refreshInstallVisibility();
                });
            }
        })();
    </script>
</body>

</html>